# SUPER COMPUTER SYSTEM [MAGI] - Ultimate Upgrade

本プロジェクトは、エヴァンゲリオンに登場するスーパーコンピューター「MAGI」を完全に再現した、高度な合議制意思決定支援プラットフォームです。
単なるシミュレーターを超え、複数のAIプロバイダー（Google, Groq, OpenAI, Anthropic, Local LLM）を統合し、実務的な意思決定に耐えうるレジリエンスと多角的な分析能力を備えています。

---

## 📽️ システム概要
3名の独立したAIペルソナ（メルキオール、バルタザール、カスパー）が、それぞれの専門性と倫理観に基づき、あらゆる案件を審議します。
さらに、最高幹部会「ゼーレ（SEELE）」による最終総括や、賢者同士の「深層シミュレーション（ディベート）」により、極めて精度の高い結論を導き出します。

---

## 🚀 主要機能

### 1. 意思決定エンジン
- **合議アルゴリズム**: 三賢者による個別審議と最終スコアリング。
- **ゼーレのWILL（総括）**: 第4のAIが三賢者の意見を統合し、最終的な戦略アドバイスを提示。
- **深層シミュレーション（ディベート）**: 賢者たちが互いの意見を読み込み、議論を深めた上で結論を出すマルチターン・モード。

### 2. インテリジェンス分析
- **資料投入機能**: PDFやテキストファイルをアップロードし、その内容を審議の「参考資料」として学習させることが可能。
- **履歴管理 (HISTORY)**: 過去の全審議を保存。インテリジェンス・レポートとしてMarkdown形式で書き出し可能。

### 3. マルチ・プロバイダー & ローカルLLM
- **対応API**: Google (Gemini), Groq, OpenAI (GPT), Anthropic (Claude)。
- **Local LLM**: Ollama や LM Studio 等のローカル環境で動作するAIとの連携。
- **APIレジリエンス**: 429エラー（通信制限）への自動リトライ、リクエストの分散処理。

### 4. NERV認証 & HUDインターフェース
- **認証画面**: 起動時のシンクロ認証シーケンス。
- **動的決定グラフ**: レーダーチャートによる「同調率（Sync Rate）」の可視化。
- **高度なパラメータ制御**: 各AIの温度（Temperature）やTop-P、最大トークン数まで微調整可能。

---

## 🛠️ クイックスタート (Docker)

1. **Dockerコンテナを起動**
   ```bash
   docker compose -f Docker/docker-compose.yml up --build
   ```
2. **ブラウザでアクセス**
   `http://localhost:8501`
3. **初期設定**
   - 起動時の「INITIATE SYNCHRONIZATION」をクリック。
   - 右上の「ADMIN」タブから使用したいAIプロバイダーのAPIキー（またはローカルURL）を設定し、モデルを同期してください。
   - 「PERSONA」タブで各賢者のモデルを割り当てれば準備完了です。

---

## 📂 プロジェクト構成

- `app.py`: Streamlitインターフェース（HUD/UI）
- `magi_core.py`: AIオーケストレーター・リトライ・ロジック
- `personas.json`: ペルソナ設定（プロンプト・モデル等）
- `api_keys.json`: APIプロバイダー・SEELE設定
- `history.json`: 審議記録データベース
- `templates.json`: 構成テンプレート
- `Docker/`: コンテナ化ファイル一式

---

## 🧪 ローカル LLM の使用例 (Ollama)
- **Base URL**: `http://host.docker.internal:11434/v1` (Docker for Mac/Winの場合)
- 同期ボタンを押すことで、ローカルにインストール済みの `llama3`, `mistral` 等が選択可能になります。

---

## 🔒 セキュリティとプライバシー（重要）

### データの実体と永続化
`docker-compose.yml` では、ホストPCのディレクトリをコンテナ内の `/app` にマウント（Bind Mount）しています。
- **なぜデータが残るのか？**: ブラウザから入力したAPIキーや履歴は、直接あなたのPC上の `api_keys.json` や `history.json` に書き込まれます。そのため、コンテナを削除したり作り直したりしても、データは失われません。

### GitHub等への公開時の注意
**警告: そのまま GitHub にプッシュすると、あなたの API キーが世界中に公開されてしまいます。**

1. **`.gitignore` の確認**: 本プロジェクトには `.gitignore` を追加しており、以下のファイルは Git の追跡から除外されます。
   - `api_keys.json` (秘密鍵)
   - `history.json` (審議履歴)
   - `personas.json` (カスタム設定)
   - `templates.json` (テンプレート)
2. **テンプレートの提供**: 他の人に共有する場合は、中身を空（またはサンプル）にした状態のファイルを共有するか、README で設定方法を案内してください。

---

## 📜 ライセンス・免責事項
本ツールは意思決定を「支援」するためのシミュレーションツールです。最終的な判断は利用者の責任において行ってください。
「MAGI」および「エヴァンゲリオン」は株式会社カラー等の著作物です。本プロジェクトはファンメイドの再現シミュレーターです。
